import"../chunks/DsnmJJEf.js";import{G as ye,n as De,D as se,o as K,A as Me,p as He,T as a,ao as Oe,B as qe,H as ze,C as me,F as ve,z as ee,ab as Re,af as Le,w as _e,J as $e,I as Ye,aC as ge,ay as Z,aD as be,aj as Ee,i as pe,aE as le,K as Ae,L as Fe,aF as ne,aG as Xe,aH as oe,y as ke,ad as Ge,aI as Be,ai as Je,aJ as Ke,a8 as Ve,aK as Ne,O as Pe,aL as Qe,M as Ue,v as Se,aM as Ze,aN as We,al as je,$ as ea,aO as aa,aP as ra,Y as fe,Z as ue,_ as T,a2 as ta,aq as Y,e as R,a0 as q,a3 as C,a5 as P,a4 as x,a1 as W,aQ as ae,az as we}from"../chunks/BMYhq-P4.js";import{l as ia,s as re,e as U,d as la}from"../chunks/DxKBGzqI.js";import{i as de,b as na}from"../chunks/CJXklI8X.js";import{i as sa}from"../chunks/DsJvex83.js";function B(t,r){return r}function va(t,r,e){for(var n=t.items,s=[],l=r.length,u=0;u<l;u++)Be(r[u].e,s,!0);var h=l>0&&s.length===0&&e!==null;if(h){var N=e.parentNode;Je(N),N.append(e),n.clear(),F(t,r[0].prev,r[l-1].next)}Ke(s,()=>{for(var A=0;A<l;A++){var b=r[A];h||(n.delete(b.k),F(t,b.prev,b.next)),ke(b.e,!h)}})}function J(t,r,e,n,s,l=null){var u=t,h={flags:r,items:new Map,first:null},N=(r&Ne)!==0;if(N){var A=t;u=K?se(Me(A)):A.appendChild(ye())}K&&He();var b=null,D=!1,O=new Map,$=Oe(()=>{var _=e();return pe(_)?_:_==null?[]:Ee(_)}),i,c;function v(){oa(c,i,h,O,u,s,r,n,e),l!==null&&(i.length===0?b?Ae(b):b=_e(()=>l(u)):b!==null&&Fe(b,()=>{b=null}))}De(()=>{c??=Ve,i=a($);var _=i.length;if(D&&_===0)return;D=_===0;let g=!1;if(K){var f=qe(u)===ze;f!==(_===0)&&(u=me(),se(u),ve(!1),g=!0)}if(K){for(var o=null,p,d=0;d<_;d++){if(ee.nodeType===Re&&ee.data===Le){u=ee,g=!0,ve(!1);break}var m=i[d],S=n(m,d);p=he(ee,h,o,null,m,S,d,s,r,e),h.items.set(S,p),o=p}_>0&&se(me())}if(K)_===0&&l&&(b=_e(()=>l(u)));else if($e()){var V=new Set,Q=Ye;for(d=0;d<_;d+=1){m=i[d],S=n(m,d);var X=h.items.get(S)??O.get(S);X?(r&(ne|le))!==0&&Ie(X,m,d,r):(p=he(null,h,null,null,m,S,d,s,r,e,!0),O.set(S,p)),V.add(S)}for(const[z,w]of h.items)V.has(z)||Q.skipped_effects.add(w.e);Q.add_callback(v)}else v();g&&ve(!0),a($)}),K&&(u=ee)}function oa(t,r,e,n,s,l,u,h,N){var A=(u&Qe)!==0,b=(u&(ne|le))!==0,D=r.length,O=e.items,$=e.first,i=$,c,v=null,_,g=[],f=[],o,p,d,m;if(A)for(m=0;m<D;m+=1)o=r[m],p=h(o,m),d=O.get(p),d!==void 0&&(d.a?.measure(),(_??=new Set).add(d));for(m=0;m<D;m+=1){if(o=r[m],p=h(o,m),d=O.get(p),d===void 0){var S=n.get(p);if(S!==void 0){n.delete(p),O.set(p,S);var V=v?v.next:i;F(e,v,S),F(e,S,V),ce(S,V,s),v=S}else{var Q=i?i.e.nodes_start:s;v=he(Q,e,v,v===null?e.first:v.next,o,p,m,l,u,N)}O.set(p,v),g=[],f=[],i=v.next;continue}if(b&&Ie(d,o,m,u),(d.e.f&oe)!==0&&(Ae(d.e),A&&(d.a?.unfix(),(_??=new Set).delete(d))),d!==i){if(c!==void 0&&c.has(d)){if(g.length<f.length){var X=f[0],z;v=X.prev;var w=g[0],k=g[g.length-1];for(z=0;z<g.length;z+=1)ce(g[z],X,s);for(z=0;z<f.length;z+=1)c.delete(f[z]);F(e,w.prev,k.next),F(e,v,w),F(e,k,X),i=X,v=k,m-=1,g=[],f=[]}else c.delete(d),ce(d,i,s),F(e,d.prev,d.next),F(e,d,v===null?e.first:v.next),F(e,v,d),v=d;continue}for(g=[],f=[];i!==null&&i.k!==p;)(i.e.f&oe)===0&&(c??=new Set).add(i),f.push(i),i=i.next;if(i===null)continue;d=i}g.push(d),v=d,i=d.next}if(i!==null||c!==void 0){for(var y=c===void 0?[]:Ee(c);i!==null;)(i.e.f&oe)===0&&y.push(i),i=i.next;var E=y.length;if(E>0){var L=(u&Ne)!==0&&D===0?s:null;if(A){for(m=0;m<E;m+=1)y[m].a?.measure();for(m=0;m<E;m+=1)y[m].a?.fix()}va(e,y,L)}}A&&Pe(()=>{if(_!==void 0)for(d of _)d.a?.apply()}),t.first=e.first&&e.first.e,t.last=v&&v.e;for(var H of n.values())ke(H.e);n.clear()}function Ie(t,r,e,n){(n&ne)!==0&&ge(t.v,r),(n&le)!==0?ge(t.i,e):t.i=e}function he(t,r,e,n,s,l,u,h,N,A,b){var D=(N&ne)!==0,O=(N&Xe)===0,$=D?O?Z(s,!1,!1):be(s):s,i=(N&le)===0?u:be(u),c={i,v:$,k:l,a:null,e:null,prev:e,next:n};try{if(t===null){var v=document.createDocumentFragment();v.append(t=ye())}return c.e=_e(()=>h(t,$,i,A),K),c.e.prev=e&&e.e,c.e.next=n&&n.e,e===null?b||(r.first=c):(e.next=c,e.e.next=c.e),n!==null&&(n.prev=c,n.e.prev=c.e),c}finally{}}function ce(t,r,e){for(var n=t.next?t.next.e.nodes_start:e,s=r?r.e.nodes_start:e,l=t.e.nodes_start;l!==null&&l!==n;){var u=Ge(l);s.before(l),l=u}}function F(t,r,e){r===null?t.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function fa(t,r,e){var n=t==null?"":""+t;return r&&(n=n?n+" "+r:r),n===""?null:n}function ie(t,r,e,n,s,l){var u=t.__className;if(K||u!==e||u===void 0){var h=fa(e,n);(!K||h!==t.getAttribute("class"))&&(h==null?t.removeAttribute("class"):t.className=h),t.__className=e}return l}function Te(t,r,e=!1){if(t.multiple){if(r==null)return;if(!pe(r))return Ze();for(var n of t.options)n.selected=r.includes(te(n));return}for(n of t.options){var s=te(n);if(We(s,r)){n.selected=!0;return}}(!e||r!==void 0)&&(t.selectedIndex=-1)}function ua(t){var r=new MutationObserver(()=>{Te(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Se(()=>{r.disconnect()})}function da(t,r,e=r){var n=!0;ia(t,"change",s=>{var l=s?"[selected]":":checked",u;if(t.multiple)u=[].map.call(t.querySelectorAll(l),te);else{var h=t.querySelector(l)??t.querySelector("option:not([disabled])");u=h&&te(h)}e(u)}),Ue(()=>{var s=r();if(Te(t,s,n),n&&s===void 0){var l=t.querySelector(":checked");l!==null&&(s=te(l),e(s))}t.__value=s,n=!1}),ua(t)}function te(t){return"__value"in t?t.__value:t.value}function ca(t,r,e){var n=je(t,r);n&&n.set&&(t[r]=e,Se(()=>{t[r]=null}))}function xe(t){return function(...r){var e=r[0];return e.preventDefault(),t?.apply(this,r)}}function _a(t,r){var e=t.$$events?.[r.type],n=pe(e)?e.slice():e==null?[]:[e];for(var s of n)s.call(this,r)}var ha=q('<div class="w-10 h-8 bg-black flex justify-center items-center"><span> </span></div>'),pa=q('<div class="flex flex-col"></div>'),ma=q('<div class="w-8 h-10 bg-black flex justify-center items-center"><span> </span></div>'),ga=q('<div class="flex justify-end"></div>'),ba=q('<button aria-label="grid button"><div></div></button>'),wa=q('<div class="flex divide-x-2 divide-black"></div>'),xa=q('<span class="px-2"> </span>'),ya=q('<span class="opacity-20 italic">all good</span>'),Ea=q('<span class="px-2"> </span>'),Aa=q('<span class="opacity-20 italic">all good</span>'),ka=q('<div class="grid gap-4"><div class="w-fit grid grid-rows-[auto_1fr] grid-cols-[auto_1fr]"><div></div> <div class="flex items-end"></div> <div class="flex flex-col"></div> <div class="divide-y-2 divide-black grid border-2 border-black bg-white relative"></div></div> <div class="w-fit gap-2 left-4 bottom-4 bg-black grid grid-cols-[auto_1fr] p-2"><div class="text-right my-auto">Rows</div> <div class="divide-x-2 divide-white/10 flex bg-white/5 p-1"><!></div> <div class="text-right my-auto">Columns</div> <div class="divide-x-2 divide-white/10 flex bg-white/5 p-1"><!></div></div></div>');function Na(t,r){ea(r,!1);let e=Z([]),n=Z([]),s=Z([]),l=Z({horizontal:[],vertical:[]}),u,h=Z(!1);const N=(i,c,v)=>{switch(Y(h,!0),a(s)[c][v]){case 0:i.button===0?u=1:i.button===2&&(u=-1);break;case 1:i.button===0?u=0:i.button===2&&(u=-1);break;case-1:i.button===0?u=1:i.button===2&&(u=0);break}A(c,v)},A=(i,c)=>{a(h)&&ae(s,a(s)[i][c]=u);const v=[];let _=0;for(let o=0;o<a(s)[i].length;o+=1)a(s)[i][o]===1?_+=1:a(s)[i][o]<=0&&_>0&&(v.push(_),_=0);_>0&&v.push(_);const g=[];let f=0;for(let o=0;o<a(s).length;o+=1)a(s)[o][c]===1?f+=1:a(s)[o][c]<=0&&f>0&&(g.push(f),f=0);f>0&&g.push(f),v.toString()===a(e)[i].toString()?ae(l,a(l).horizontal=a(l).horizontal.filter(o=>o!==i)):a(l).horizontal.includes(i)||ae(l,a(l).horizontal=[i,...a(l).horizontal]),g.toString()===a(n)[c].toString()?ae(l,a(l).vertical=a(l).vertical.filter(o=>o!==c)):a(l).vertical.includes(c)||ae(l,a(l).vertical=[c,...a(l).vertical])},b=i=>{Y(e,[]),Y(n,[]),Y(s,[]);const c=.5,v=Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0));for(let f=0;f<i;f++)for(let o=0;o<i;o++)v[f][o]=Math.random()<c?1:0;let _=[];for(let f=0;f<v.length;f+=1){let o=0;for(let p=0;p<v[f].length;p+=1)v[f][p]===1?o+=1:v[f][p]<=0&&o>0&&(_.push(o),o=0);o>0&&_.push(o),a(e).push(_),_=[]}let g=[];for(let f=0;f<v.length;f+=1){let o=0;for(let p=0;p<v[f].length;p+=1)v[p][f]===1?o+=1:v[p][f]<=0&&o>0&&(g.push(o),o=0);o>0&&g.push(o),a(n).push(g),g=[]}(a(e).some(f=>f.length===0)||a(n).some(f=>f.length===0))&&b(i),Y(l,{horizontal:a(e).map((f,o)=>o),vertical:a(n).map((f,o)=>o)}),Y(s,Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0)))};aa(()=>a(l),()=>{a(l).horizontal.length===0&&a(l).vertical.length}),ra(),sa();var D=fe(),O=ue(D);{var $=i=>{var c=ka(),v=C(c),_=P(C(v),2);J(_,5,()=>a(n),B,(w,k,y)=>{var E=pa();J(E,5,()=>a(k),B,(L,H)=>{var I=ha(),M=C(I),j=C(M,!0);x(M),x(I),W(G=>{ie(M,1,G),re(j,a(H))},[()=>(a(l),R(()=>a(l).vertical.includes(y)?"":"opacity-20"))]),T(L,I)}),x(E),T(w,E)}),x(_);var g=P(_,2);J(g,5,()=>a(e),B,(w,k,y)=>{var E=ga();J(E,5,()=>a(k),B,(L,H)=>{var I=ma(),M=C(I),j=C(M,!0);x(M),x(I),W(G=>{ie(M,1,G),re(j,a(H))},[()=>(a(l),R(()=>a(l).horizontal.includes(y)?"":"opacity-20"))]),T(L,I)}),x(E),T(w,E)}),x(g);var f=P(g,2);J(f,5,()=>(a(e),R(()=>({length:a(e).length}))),B,(w,k,y)=>{var E=wa();J(E,5,()=>(a(n),R(()=>({length:a(n).length}))),B,(L,H,I)=>{var M=ba(),j=C(M);x(M),W((G,Ce)=>{ie(M,1,`${a(s),R(()=>a(s)[y][I]===1?"!bg-black/75":a(s)[y][I]===-1?"x":"bg-white")??""} hover:bg-black/10 relative w-full h-full overflow-hidden`,"svelte-1ou27ty"),ie(j,1,`${G??""} ${Ce??""} opacity-30`,"svelte-1ou27ty")},[()=>(a(l),R(()=>a(l).horizontal.includes(y)?"":"line-x")),()=>(a(l),R(()=>a(l).vertical.includes(I)?"":"line-y"))]),U("contextmenu",M,xe(function(G){_a.call(this,r,G)})),U("mousedown",M,xe(G=>N(G,y,I))),U("mouseover",M,()=>{a(h)&&A(y,I)}),T(L,M)}),x(E),T(w,E)}),x(f),x(v);var o=P(v,2),p=P(C(o),2),d=C(p);{var m=w=>{var k=fe(),y=ue(k);J(y,1,()=>(a(l),R(()=>a(l).horizontal.sort())),B,(E,L)=>{var H=xa(),I=C(H,!0);x(H),W(()=>re(I,a(L)+1)),T(E,H)}),T(w,k)},S=w=>{var k=ya();T(w,k)};de(d,w=>{a(l),R(()=>a(l).horizontal.length>0)?w(m):w(S,!1)})}x(p);var V=P(p,4),Q=C(V);{var X=w=>{var k=fe(),y=ue(k);J(y,1,()=>(a(l),R(()=>a(l).vertical.sort())),B,(E,L)=>{var H=Ea(),I=C(H,!0);x(H),W(()=>re(I,a(L)+1)),T(E,H)}),T(w,k)},z=w=>{var k=Aa();T(w,k)};de(Q,w=>{a(l),R(()=>a(l).vertical.length>0)?w(X):w(z,!1)})}x(V),x(o),x(c),U("mouseup",v,()=>Y(h,!1)),U("mouseleave",v,()=>Y(h,!1)),U("keypress",v,()=>null),T(i,c)};de(O,i=>{a(s),R(()=>a(s).length>0)&&i($)})}return T(t,D),ca(r,"random",b),ta({random:b})}function Sa(t,r,e){a(r).random(a(e))}var Ia=q("<option> </option>"),Ta=q('<div><div class="w-fit mx-auto mt-4"><!></div> <div class="fixed bottom-4 right-4"><select class="bg-black px-4 py-2"></select> <button class="bg-black px-4 py-2 cursor-pointer">New</button></div></div>');function qa(t){let r=we(void 0),e=we(void 0),n=[{name:"5x5",value:5},{name:"8x8",value:8},{name:"10x10",value:10}];var s=Ta(),l=C(s),u=C(l);na(Na(u,{}),b=>Y(r,b,!0),()=>a(r)),x(l);var h=P(l,2),N=C(h);J(N,21,()=>n,B,(b,D,O,$)=>{var i=Ia(),c=C(i,!0);x(i);var v={};W(()=>{re(c,a(D).name),v!==(v=a(D).value)&&(i.value=(i.__value=a(D).value)??"")}),T(b,i)}),x(N);var A=P(N,2);A.__click=[Sa,r,e],x(h),x(s),da(N,()=>a(e),b=>Y(e,b)),T(t,s)}la(["click"]);export{qa as component};
