import"../chunks/DsnmJJEf.js";import{Q as re,K as P,al as Me,S as ge,L as De,J as Re,q as t,a9 as Le,N as He,O as Oe,P as ce,R as te,Z as V,am as ze,aq as $e,T as ne,W as Pe,U as Ye,au as be,i as we,ax as Q,aB as ue,aC as _e,X as xe,Y as qe,aD as j,aE as ie,aF as ke,aG as ee,aH as Be,ao as Ge,aI as Ue,at as Xe,aJ as Fe,a7 as Ke,a0 as Je,aK as Ee,aL as Qe,aM as Ve,aN as We,aO as Ze,aP as je,aQ as ea,a2 as aa,aj as ra,D as H,A as ta,B as D,G as R,H as E,C as Ae,aR as ia,aS as la,y as Ne,z as oe,F as Se,a6 as L,e as z,I as X,E as F,aT as W,ay as Z,aU as sa,aA as na}from"../chunks/C5dkKTTq.js";import{i as ye,p as le,b as oa}from"../chunks/DpEQXZp4.js";import{d as Te,e as K,s as ve}from"../chunks/CsWQFCPY.js";import{i as va}from"../chunks/CbnTvHeH.js";let he=!1;function fa(){he||(he=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const a of r.target.elements)a.__on_r?.()})},{capture:!0}))}function G(r,a){return a}function da(r,a,e){for(var s=r.items,n=[],l=a.length,c=0;c<l;c++)Ue(a[c].e,n,!0);var m=l>0&&n.length===0&&e!==null;if(m){var y=e.parentNode;Xe(y),y.append(e),s.clear(),Y(r,a[0].prev,a[l-1].next)}Fe(n,()=>{for(var k=0;k<l;k++){var x=a[k];m||(s.delete(x.k),Y(r,x.prev,x.next)),ke(x.e,!m)}})}function U(r,a,e,s,n,l=null){var c=r,m={flags:a,items:new Map,first:null},y=(a&Ee)!==0;if(y){var k=r;c=P?re(Me(k)):k.appendChild(ge())}P&&De();var x=null,T=!1,I=new Map,C=Le(()=>{var _=e();return we(_)?_:_==null?[]:be(_)}),i,u;function v(){ca(u,i,m,I,c,n,a,s,e),l!==null&&(i.length===0?x?xe(x):x=ne(()=>l(c)):x!==null&&qe(x,()=>{x=null}))}Re(()=>{u??=Ke,i=t(C);var _=i.length;if(T&&_===0)return;T=_===0;let h=!1;if(P){var f=He(c)===Oe;f!==(_===0)&&(c=ce(),re(c),te(!1),h=!0)}if(P){for(var o=null,g,d=0;d<_;d++){if(V.nodeType===ze&&V.data===$e){c=V,h=!0,te(!1);break}var p=i[d],w=s(p,d);g=fe(V,m,o,null,p,w,d,n,a,e),m.items.set(w,g),o=g}_>0&&re(ce())}if(P)_===0&&l&&(x=ne(()=>l(c)));else if(Pe()){var O=new Set,N=Ye;for(d=0;d<_;d+=1){p=i[d],w=s(p,d);var b=m.items.get(w)??I.get(w);b?(a&(ee|j))!==0&&Ie(b,p,d,a):(g=fe(null,m,null,null,p,w,d,n,a,e,!0),I.set(w,g)),O.add(w)}for(const[S,q]of m.items)O.has(S)||N.skipped_effects.add(q.e);N.add_callback(v)}else v();h&&te(!0),t(C)}),P&&(c=V)}function ca(r,a,e,s,n,l,c,m,y){var k=(c&Qe)!==0,x=(c&(ee|j))!==0,T=a.length,I=e.items,C=e.first,i=C,u,v=null,_,h=[],f=[],o,g,d,p;if(k)for(p=0;p<T;p+=1)o=a[p],g=m(o,p),d=I.get(g),d!==void 0&&(d.a?.measure(),(_??=new Set).add(d));for(p=0;p<T;p+=1){if(o=a[p],g=m(o,p),d=I.get(g),d===void 0){var w=s.get(g);if(w!==void 0){s.delete(g),I.set(g,w);var O=v?v.next:i;Y(e,v,w),Y(e,w,O),se(w,O,n),v=w}else{var N=i?i.e.nodes_start:n;v=fe(N,e,v,v===null?e.first:v.next,o,g,p,l,c,y)}I.set(g,v),h=[],f=[],i=v.next;continue}if(x&&Ie(d,o,p,c),(d.e.f&ie)!==0&&(xe(d.e),k&&(d.a?.unfix(),(_??=new Set).delete(d))),d!==i){if(u!==void 0&&u.has(d)){if(h.length<f.length){var b=f[0],S;v=b.prev;var q=h[0],M=h[h.length-1];for(S=0;S<h.length;S+=1)se(h[S],b,n);for(S=0;S<f.length;S+=1)u.delete(f[S]);Y(e,q.prev,M.next),Y(e,v,q),Y(e,M,b),i=b,v=M,p-=1,h=[],f=[]}else u.delete(d),se(d,i,n),Y(e,d.prev,d.next),Y(e,d,v===null?e.first:v.next),Y(e,v,d),v=d;continue}for(h=[],f=[];i!==null&&i.k!==g;)(i.e.f&ie)===0&&(u??=new Set).add(i),f.push(i),i=i.next;if(i===null)continue;d=i}h.push(d),v=d,i=d.next}if(i!==null||u!==void 0){for(var A=u===void 0?[]:be(u);i!==null;)(i.e.f&ie)===0&&A.push(i),i=i.next;var B=A.length;if(B>0){var $=(c&Ee)!==0&&T===0?n:null;if(k){for(p=0;p<B;p+=1)A[p].a?.measure();for(p=0;p<B;p+=1)A[p].a?.fix()}da(e,A,$)}}k&&Je(()=>{if(_!==void 0)for(d of _)d.a?.apply()}),r.first=e.first&&e.first.e,r.last=v&&v.e;for(var ae of s.values())ke(ae.e);s.clear()}function Ie(r,a,e,s){(s&ee)!==0&&_e(r.v,a),(s&j)!==0?_e(r.i,e):r.i=e}function fe(r,a,e,s,n,l,c,m,y,k,x){var T=(y&ee)!==0,I=(y&Be)===0,C=T?I?Q(n,!1,!1):ue(n):n,i=(y&j)===0?c:ue(c),u={i,v:C,k:l,a:null,e:null,prev:e,next:s};try{if(r===null){var v=document.createDocumentFragment();v.append(r=ge())}return u.e=ne(()=>m(r,C,i,k),P),u.e.prev=e&&e.e,u.e.next=s&&s.e,e===null?x||(a.first=u):(e.next=u,e.e.next=u.e),s!==null&&(s.prev=u,s.e.prev=u.e),u}finally{}}function se(r,a,e){for(var s=r.next?r.next.e.nodes_start:e,n=a?a.e.nodes_start:e,l=r.e.nodes_start;l!==null&&l!==s;){var c=Ge(l);n.before(l),l=c}}function Y(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function ua(r,a,e){var s=r==null?"":""+r;return a&&(s=s?s+" "+a:a),s===""?null:s}function J(r,a,e,s,n,l){var c=r.__className;if(P||c!==e||c===void 0){var m=ua(e,s);(!P||m!==r.getAttribute("class"))&&(m==null?r.removeAttribute("class"):r.className=m),r.__className=e}return l}const _a=Symbol("is custom element"),ha=Symbol("is html");function pa(r){if(P){var a=!1,e=()=>{if(!a){if(a=!0,r.hasAttribute("value")){var s=r.value;de(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var n=r.checked;de(r,"checked",null),r.checked=n}}};r.__on_r=e,Ve(e),fa()}}function ma(r,a){var e=Ce(r);e.value===(e.value=a??void 0)||r.value===a&&(a!==0||r.nodeName!=="PROGRESS")||(r.value=a??"")}function de(r,a,e,s){var n=Ce(r);P&&(n[a]=r.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&r.nodeName==="LINK")||n[a]!==(n[a]=e)&&(a==="loading"&&(r[je]=e),e==null?r.removeAttribute(a):typeof e!="string"&&ga(r).includes(a)?r[a]=e:r.setAttribute(a,e))}function Ce(r){return r.__attributes??={[_a]:r.nodeName.includes("-"),[ha]:r.namespaceURI===We}}var pe=new Map;function ga(r){var a=pe.get(r.nodeName);if(a)return a;pe.set(r.nodeName,a=[]);for(var e,s=r,n=Element.prototype;n!==s;){e=ea(s);for(var l in e)e[l].set&&a.push(l);s=Ze(s)}return a}function ba(r,a,e){var s=aa(r,a);s&&s.set&&(r[a]=e,ra(()=>{r[a]=null}))}function me(r){return function(...a){var e=a[0];return e.preventDefault(),r?.apply(this,a)}}function wa(r,a){var e=r.$$events?.[a.type],s=we(e)?e.slice():e==null?[]:[e];for(var n of s)n.call(this,a)}var xa=H('<button class="bg-black px-4 py-2 cursor-pointer"><!></button>');function ka(r,a){var e=xa();e.__click=function(...n){a.onclick?.apply(this,n)};var s=R(e);ta(s,()=>a.children),E(e),D(r,e)}Te(["click"]);var Ea=H('<div class="w-10 h-8 bg-black flex justify-center items-center"><span> </span></div>'),Aa=H('<div class="flex flex-col"></div>'),Na=H('<div class="w-8 h-10 bg-black flex justify-center items-center"><span> </span></div>'),Sa=H('<div class="flex justify-end"></div>'),ya=H('<button aria-label="grid button"><div></div></button>'),Ta=H('<div class="flex divide-x-2 divide-black"></div>'),Ia=H("<span></span>"),Ca=H("<span></span>"),Ma=H('<div class="grid gap-4"><div class="w-fit grid grid-rows-[auto_1fr] grid-cols-[auto_1fr]"><div></div> <div class="flex items-end"></div> <div class="flex flex-col"></div> <div class="divide-y-2 divide-black grid border-2 border-black bg-white relative"></div></div></div> <div class="fixed right-4 top-4 text-center gap-2 bg-black grid grid-cols-2 p-2"><div class="my-auto px-1">Rows</div> <div class="my-auto px-1">Cols</div> <div class="divide-y-2 divide-white/10 w-full flex flex-col bg-white/10 p-1"></div> <div class="divide-y-2 divide-white/10 w-full flex flex-col bg-white/10 p-1"></div></div>',1);function Da(r,a){Ae(a,!1);let e=Q([]),s=Q([]),n=Q([]),l=Q({horizontal:[],vertical:[]}),c,m=Q(!1);const y=(i,u,v)=>{switch(L(m,!0),t(n)[u][v]){case 0:i.button===0?c=1:i.button===2&&(c=-1);break;case 1:i.button===0?c=0:i.button===2&&(c=-1);break;case-1:i.button===0?c=1:i.button===2&&(c=0);break}k(u,v)},k=(i,u)=>{t(m)&&W(n,t(n)[i][u]=c);const v=[];let _=0;for(let o=0;o<t(n)[i].length;o+=1)t(n)[i][o]===1?_+=1:t(n)[i][o]<=0&&_>0&&(v.push(_),_=0);_>0&&v.push(_);const h=[];let f=0;for(let o=0;o<t(n).length;o+=1)t(n)[o][u]===1?f+=1:t(n)[o][u]<=0&&f>0&&(h.push(f),f=0);f>0&&h.push(f),v.toString()===t(e)[i].toString()?W(l,t(l).horizontal=t(l).horizontal.filter(o=>o!==i)):t(l).horizontal.includes(i)||W(l,t(l).horizontal=[i,...t(l).horizontal]),h.toString()===t(s)[u].toString()?W(l,t(l).vertical=t(l).vertical.filter(o=>o!==u)):t(l).vertical.includes(u)||W(l,t(l).vertical=[u,...t(l).vertical])},x=i=>{L(e,[]),L(s,[]),L(n,[]);const u=.5,v=Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0));for(let f=0;f<i;f++)for(let o=0;o<i;o++)v[f][o]=Math.random()<u?1:0;let _=[];for(let f=0;f<v.length;f+=1){let o=0;for(let g=0;g<v[f].length;g+=1)v[f][g]===1?o+=1:v[f][g]<=0&&o>0&&(_.push(o),o=0);o>0&&_.push(o),t(e).push(_),_=[]}let h=[];for(let f=0;f<v.length;f+=1){let o=0;for(let g=0;g<v[f].length;g+=1)v[g][f]===1?o+=1:v[g][f]<=0&&o>0&&(h.push(o),o=0);o>0&&h.push(o),t(s).push(h),h=[]}(t(e).some(f=>f.length===0)||t(s).some(f=>f.length===0))&&x(i),L(l,{horizontal:t(e).map((f,o)=>o),vertical:t(s).map((f,o)=>o)}),L(n,Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0)))};ia(()=>t(l),()=>{t(l).horizontal.length===0&&t(l).vertical.length}),la(),va();var T=Ne(),I=oe(T);{var C=i=>{var u=Ma(),v=oe(u),_=R(v),h=X(R(_),2);U(h,5,()=>t(s),G,(w,O,N)=>{var b=Aa();U(b,5,()=>t(O),G,(S,q)=>{var M=Ea(),A=R(M),B=R(A,!0);E(A),E(M),F($=>{J(A,1,$),ve(B,t(q))},[()=>(t(l),z(()=>t(l).vertical.includes(N)?"":"opacity-20"))]),D(S,M)}),E(b),D(w,b)}),E(h);var f=X(h,2);U(f,5,()=>t(e),G,(w,O,N)=>{var b=Sa();U(b,5,()=>t(O),G,(S,q)=>{var M=Na(),A=R(M),B=R(A,!0);E(A),E(M),F($=>{J(A,1,$),ve(B,t(q))},[()=>(t(l),z(()=>t(l).horizontal.includes(N)?"":"opacity-20"))]),D(S,M)}),E(b),D(w,b)}),E(f);var o=X(f,2);U(o,5,()=>(t(e),z(()=>({length:t(e).length}))),G,(w,O,N)=>{var b=Ta();U(b,5,()=>(t(s),z(()=>({length:t(s).length}))),G,(S,q,M)=>{var A=ya(),B=R(A);E(A),F(($,ae)=>{J(A,1,`${t(n),z(()=>t(n)[N][M]===1?"!bg-black/75":t(n)[N][M]===-1?"x":"bg-white")??""} hover:bg-black/10 relative w-full h-full overflow-hidden`,"svelte-1ou27ty"),J(B,1,`${$??""} ${ae??""} opacity-30`,"svelte-1ou27ty")},[()=>(t(l),z(()=>t(l).horizontal.includes(N)?"":"line-x")),()=>(t(l),z(()=>t(l).vertical.includes(M)?"":"line-y"))]),K("contextmenu",A,me(function($){wa.call(this,a,$)})),K("mousedown",A,me($=>y($,N,M))),K("mouseover",A,()=>{t(m)&&k(N,M)}),D(S,A)}),E(b),D(w,b)}),E(o),E(_),E(v);var g=X(v,2),d=X(R(g),4);U(d,5,()=>(t(n),z(()=>({length:t(n).length}))),G,(w,O,N)=>{var b=Ia();b.textContent=N+1,F(S=>J(b,1,`px-2 py-1 ${S??""}`),[()=>(t(l),z(()=>t(l).horizontal.includes(N)?"":"text-white/20"))]),D(w,b)}),E(d);var p=X(d,2);U(p,5,()=>(t(n),z(()=>({length:t(n)[0].length}))),G,(w,O,N)=>{var b=Ca();b.textContent=N+1,F(S=>J(b,1,`px-2 py-1 ${S??""}`),[()=>(t(l),z(()=>t(l).vertical.includes(N)?"":"text-white/20"))]),D(w,b)}),E(p),E(g),K("mouseup",_,()=>L(m,!1)),K("mouseleave",_,()=>L(m,!1)),K("keypress",_,()=>null),D(i,u)};ye(I,i=>{t(n),z(()=>t(n).length>0)&&i(C)})}return D(r,T),ba(a,"random",x),Se({random:x})}var Ra=(r,a,e)=>a(t(e)),La=H('<li class="bg-black p-2 hover:inset-ring-1"> </li>'),Ha=(r,a)=>L(a,!t(a)),Oa=H('<div class="grid grid-rows-[auto_1fr] bg-black text-white"><ol class="cursor-pointer order-1"><!></ol> <input class="cursor-pointer outline-none m-2 min-w-0 order-2" role="combobox" readonly=""/></div>');function za(r,a){Ae(a,!0);let e=Z(!1),s=Z(void 0),n=le(a,"options",19,()=>[]),l=le(a,"select",15),c=le(a,"placeholder",3,"Select");const m=C=>{l(C.value),L(s,C.name,!0),L(e,!1)};var y=Oa(),k=R(y),x=R(k);{var T=C=>{var i=Ne(),u=oe(i);U(u,17,n,G,(v,_)=>{var h=La();h.__click=[Ra,m,_];var f=R(h,!0);E(h),F(()=>ve(f,t(_).name)),D(v,h)}),D(C,i)};ye(x,C=>{t(e)&&C(T)})}E(k);var I=X(k,2);pa(I),I.__click=[Ha,e],E(y),F(()=>{ma(I,t(s)),de(I,"placeholder",c())}),D(r,y),Se()}Te(["click"]);var $a=H('<div><div class="w-fit mx-auto mt-4"><!></div> <div class="fixed grid gap-2 bottom-4 right-4 !w-30"><!> <!></div></div>');function Ua(r){let a=Z(void 0),e=Z(void 0),s=[{name:"5x5",value:5},{name:"8x8",value:8},{name:"10x10",value:10}];function n(){t(a).random(t(e))}var l=$a(),c=R(l),m=R(c);oa(Da(m,{}),T=>L(a,T,!0),()=>t(a)),E(c);var y=X(c,2),k=R(y);za(k,{get options(){return s},placeholder:"Select size",get select(){return t(e)},set select(T){L(e,T,!0)}});var x=X(k,2);ka(x,{onclick:n,children:(T,I)=>{sa();var C=na("New");D(T,C)}}),E(y),E(l),D(r,l)}export{Ua as component};
