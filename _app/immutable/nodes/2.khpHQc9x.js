import"../chunks/DsnmJJEf.js";import{Q as ae,K as P,al as Me,S as ge,L as De,J as Re,q as t,a9 as Le,N as He,O as Oe,P as ue,R as te,Z as V,am as ze,aq as $e,T as se,W as Pe,U as Ye,au as be,i as xe,ax as Q,aB as ce,aC as _e,X as we,Y as qe,aD as j,aE as ie,aF as Ee,aG as ee,aH as Be,ao as Ge,aI as Ue,at as Xe,aJ as Fe,a7 as Ke,a0 as Je,aK as Ae,aL as Qe,aM as Ve,aN as We,aO as Ze,aP as je,aQ as er,a2 as rr,aj as ar,D as H,A as tr,B as D,G as R,H as A,C as Ne,aR as ir,aS as lr,y as ke,z as oe,F as Se,a6 as L,e as z,I as X,E as F,aT as W,ay as Z,aU as nr,aA as sr}from"../chunks/C5dkKTTq.js";import{i as ye,p as le,b as or}from"../chunks/DpEQXZp4.js";import{d as Te,e as K,s as ve}from"../chunks/CsWQFCPY.js";import{i as vr}from"../chunks/CbnTvHeH.js";let he=!1;function fr(){he||(he=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{if(!a.defaultPrevented)for(const r of a.target.elements)r.__on_r?.()})},{capture:!0}))}function G(a,r){return r}function dr(a,r,e){for(var n=a.items,s=[],l=r.length,u=0;u<l;u++)Ue(r[u].e,s,!0);var p=l>0&&s.length===0&&e!==null;if(p){var y=e.parentNode;Xe(y),y.append(e),n.clear(),Y(a,r[0].prev,r[l-1].next)}Fe(s,()=>{for(var E=0;E<l;E++){var w=r[E];p||(n.delete(w.k),Y(a,w.prev,w.next)),Ee(w.e,!p)}})}function U(a,r,e,n,s,l=null){var u=a,p={flags:r,items:new Map,first:null},y=(r&Ae)!==0;if(y){var E=a;u=P?ae(Me(E)):E.appendChild(ge())}P&&De();var w=null,T=!1,I=new Map,C=Le(()=>{var _=e();return xe(_)?_:_==null?[]:be(_)}),i,c;function v(){ur(c,i,p,I,u,s,r,n,e),l!==null&&(i.length===0?w?we(w):w=se(()=>l(u)):w!==null&&qe(w,()=>{w=null}))}Re(()=>{c??=Ke,i=t(C);var _=i.length;if(T&&_===0)return;T=_===0;let h=!1;if(P){var f=He(u)===Oe;f!==(_===0)&&(u=ue(),ae(u),te(!1),h=!0)}if(P){for(var o=null,g,d=0;d<_;d++){if(V.nodeType===ze&&V.data===$e){u=V,h=!0,te(!1);break}var m=i[d],x=n(m,d);g=fe(V,p,o,null,m,x,d,s,r,e),p.items.set(x,g),o=g}_>0&&ae(ue())}if(P)_===0&&l&&(w=se(()=>l(u)));else if(Pe()){var O=new Set,k=Ye;for(d=0;d<_;d+=1){m=i[d],x=n(m,d);var b=p.items.get(x)??I.get(x);b?(r&(ee|j))!==0&&Ie(b,m,d,r):(g=fe(null,p,null,null,m,x,d,s,r,e,!0),I.set(x,g)),O.add(x)}for(const[S,q]of p.items)O.has(S)||k.skipped_effects.add(q.e);k.add_callback(v)}else v();h&&te(!0),t(C)}),P&&(u=V)}function ur(a,r,e,n,s,l,u,p,y){var E=(u&Qe)!==0,w=(u&(ee|j))!==0,T=r.length,I=e.items,C=e.first,i=C,c,v=null,_,h=[],f=[],o,g,d,m;if(E)for(m=0;m<T;m+=1)o=r[m],g=p(o,m),d=I.get(g),d!==void 0&&(d.a?.measure(),(_??=new Set).add(d));for(m=0;m<T;m+=1){if(o=r[m],g=p(o,m),d=I.get(g),d===void 0){var x=n.get(g);if(x!==void 0){n.delete(g),I.set(g,x);var O=v?v.next:i;Y(e,v,x),Y(e,x,O),ne(x,O,s),v=x}else{var k=i?i.e.nodes_start:s;v=fe(k,e,v,v===null?e.first:v.next,o,g,m,l,u,y)}I.set(g,v),h=[],f=[],i=v.next;continue}if(w&&Ie(d,o,m,u),(d.e.f&ie)!==0&&(we(d.e),E&&(d.a?.unfix(),(_??=new Set).delete(d))),d!==i){if(c!==void 0&&c.has(d)){if(h.length<f.length){var b=f[0],S;v=b.prev;var q=h[0],M=h[h.length-1];for(S=0;S<h.length;S+=1)ne(h[S],b,s);for(S=0;S<f.length;S+=1)c.delete(f[S]);Y(e,q.prev,M.next),Y(e,v,q),Y(e,M,b),i=b,v=M,m-=1,h=[],f=[]}else c.delete(d),ne(d,i,s),Y(e,d.prev,d.next),Y(e,d,v===null?e.first:v.next),Y(e,v,d),v=d;continue}for(h=[],f=[];i!==null&&i.k!==g;)(i.e.f&ie)===0&&(c??=new Set).add(i),f.push(i),i=i.next;if(i===null)continue;d=i}h.push(d),v=d,i=d.next}if(i!==null||c!==void 0){for(var N=c===void 0?[]:be(c);i!==null;)(i.e.f&ie)===0&&N.push(i),i=i.next;var B=N.length;if(B>0){var $=(u&Ae)!==0&&T===0?s:null;if(E){for(m=0;m<B;m+=1)N[m].a?.measure();for(m=0;m<B;m+=1)N[m].a?.fix()}dr(e,N,$)}}E&&Je(()=>{if(_!==void 0)for(d of _)d.a?.apply()}),a.first=e.first&&e.first.e,a.last=v&&v.e;for(var re of n.values())Ee(re.e);n.clear()}function Ie(a,r,e,n){(n&ee)!==0&&_e(a.v,r),(n&j)!==0?_e(a.i,e):a.i=e}function fe(a,r,e,n,s,l,u,p,y,E,w){var T=(y&ee)!==0,I=(y&Be)===0,C=T?I?Q(s,!1,!1):ce(s):s,i=(y&j)===0?u:ce(u),c={i,v:C,k:l,a:null,e:null,prev:e,next:n};try{if(a===null){var v=document.createDocumentFragment();v.append(a=ge())}return c.e=se(()=>p(a,C,i,E),P),c.e.prev=e&&e.e,c.e.next=n&&n.e,e===null?w||(r.first=c):(e.next=c,e.e.next=c.e),n!==null&&(n.prev=c,n.e.prev=c.e),c}finally{}}function ne(a,r,e){for(var n=a.next?a.next.e.nodes_start:e,s=r?r.e.nodes_start:e,l=a.e.nodes_start;l!==null&&l!==n;){var u=Ge(l);s.before(l),l=u}}function Y(a,r,e){r===null?a.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function cr(a,r,e){var n=a==null?"":""+a;return r&&(n=n?n+" "+r:r),n===""?null:n}function J(a,r,e,n,s,l){var u=a.__className;if(P||u!==e||u===void 0){var p=cr(e,n);(!P||p!==a.getAttribute("class"))&&(p==null?a.removeAttribute("class"):a.className=p),a.__className=e}return l}const _r=Symbol("is custom element"),hr=Symbol("is html");function mr(a){if(P){var r=!1,e=()=>{if(!r){if(r=!0,a.hasAttribute("value")){var n=a.value;de(a,"value",null),a.value=n}if(a.hasAttribute("checked")){var s=a.checked;de(a,"checked",null),a.checked=s}}};a.__on_r=e,Ve(e),fr()}}function pr(a,r){var e=Ce(a);e.value===(e.value=r??void 0)||a.value===r&&(r!==0||a.nodeName!=="PROGRESS")||(a.value=r??"")}function de(a,r,e,n){var s=Ce(a);P&&(s[r]=a.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&a.nodeName==="LINK")||s[r]!==(s[r]=e)&&(r==="loading"&&(a[je]=e),e==null?a.removeAttribute(r):typeof e!="string"&&gr(a).includes(r)?a[r]=e:a.setAttribute(r,e))}function Ce(a){return a.__attributes??={[_r]:a.nodeName.includes("-"),[hr]:a.namespaceURI===We}}var me=new Map;function gr(a){var r=me.get(a.nodeName);if(r)return r;me.set(a.nodeName,r=[]);for(var e,n=a,s=Element.prototype;s!==n;){e=er(n);for(var l in e)e[l].set&&r.push(l);n=Ze(n)}return r}function br(a,r,e){var n=rr(a,r);n&&n.set&&(a[r]=e,ar(()=>{a[r]=null}))}function pe(a){return function(...r){var e=r[0];return e.preventDefault(),a?.apply(this,r)}}function xr(a,r){var e=a.$$events?.[r.type],n=xe(e)?e.slice():e==null?[]:[e];for(var s of n)s.call(this,r)}var wr=H('<button class="bg-black px-4 py-2 cursor-pointer rounded-sm"><!></button>');function Er(a,r){var e=wr();e.__click=function(...s){r.onclick?.apply(this,s)};var n=R(e);tr(n,()=>r.children),A(e),D(a,e)}Te(["click"]);var Ar=H('<div class="w-10 h-8 flex justify-center items-center text-center"><span> </span></div>'),Nr=H('<div class="flex flex-col bg-black rounded-sm m-px mb-1"></div>'),kr=H('<div class="w-8 h-10 flex justify-center items-center"><span> </span></div>'),Sr=H('<div class="flex justify-end bg-black rounded-sm m-px mr-1"></div>'),yr=H('<button aria-label="grid button"><div></div></button>'),Tr=H('<div class="flex"></div>'),Ir=H("<span></span>"),Cr=H("<span></span>"),Mr=H('<div class="grid gap-4"><div class="w-fit grid grid-rows-[auto_1fr] grid-cols-[auto_1fr]"><div></div> <div class="flex items-end"></div> <div class="flex flex-col"></div> <div class="grid bg-white relative"></div></div></div> <div class="fixed right-4 top-4 text-center gap-2 bg-black grid grid-cols-2 p-2 rounded-sm"><div class="my-auto px-1">Rows</div> <div class="my-auto px-1">Cols</div> <div class="divide-y-2 divide-white/10 w-full flex flex-col bg-white/10 p-1 rounded-xs"></div> <div class="divide-y-2 divide-white/10 w-full flex flex-col bg-white/10 p-1 rounded-xs"></div></div>',1);function Dr(a,r){Ne(r,!1);let e=Q([]),n=Q([]),s=Q([]),l=Q({horizontal:[],vertical:[]}),u,p=Q(!1);const y=(i,c,v)=>{switch(L(p,!0),t(s)[c][v]){case 0:i.button===0?u=1:i.button===2&&(u=-1);break;case 1:i.button===0?u=0:i.button===2&&(u=-1);break;case-1:i.button===0?u=1:i.button===2&&(u=0);break}E(c,v)},E=(i,c)=>{t(p)&&W(s,t(s)[i][c]=u);const v=[];let _=0;for(let o=0;o<t(s)[i].length;o+=1)t(s)[i][o]===1?_+=1:t(s)[i][o]<=0&&_>0&&(v.push(_),_=0);_>0&&v.push(_);const h=[];let f=0;for(let o=0;o<t(s).length;o+=1)t(s)[o][c]===1?f+=1:t(s)[o][c]<=0&&f>0&&(h.push(f),f=0);f>0&&h.push(f),v.toString()===t(e)[i].toString()?W(l,t(l).horizontal=t(l).horizontal.filter(o=>o!==i)):t(l).horizontal.includes(i)||W(l,t(l).horizontal=[i,...t(l).horizontal]),h.toString()===t(n)[c].toString()?W(l,t(l).vertical=t(l).vertical.filter(o=>o!==c)):t(l).vertical.includes(c)||W(l,t(l).vertical=[c,...t(l).vertical])},w=i=>{L(e,[]),L(n,[]),L(s,[]);const c=.5,v=Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0));for(let f=0;f<i;f++)for(let o=0;o<i;o++)v[f][o]=Math.random()<c?1:0;let _=[];for(let f=0;f<v.length;f+=1){let o=0;for(let g=0;g<v[f].length;g+=1)v[f][g]===1?o+=1:v[f][g]<=0&&o>0&&(_.push(o),o=0);o>0&&_.push(o),t(e).push(_),_=[]}let h=[];for(let f=0;f<v.length;f+=1){let o=0;for(let g=0;g<v[f].length;g+=1)v[g][f]===1?o+=1:v[g][f]<=0&&o>0&&(h.push(o),o=0);o>0&&h.push(o),t(n).push(h),h=[]}(t(e).some(f=>f.length===0)||t(n).some(f=>f.length===0))&&w(i),L(l,{horizontal:t(e).map((f,o)=>o),vertical:t(n).map((f,o)=>o)}),L(s,Array.from({length:i}).map(f=>Array.from({length:i}).map(o=>0)))};ir(()=>t(l),()=>{t(l).horizontal.length===0&&t(l).vertical.length}),lr(),vr();var T=ke(),I=oe(T);{var C=i=>{var c=Mr(),v=oe(c),_=R(v),h=X(R(_),2);U(h,5,()=>t(n),G,(x,O,k)=>{var b=Nr();U(b,5,()=>t(O),G,(S,q)=>{var M=Ar(),N=R(M),B=R(N,!0);A(N),A(M),F($=>{J(N,1,$),ve(B,t(q))},[()=>(t(l),z(()=>t(l).vertical.includes(k)?"":"opacity-20"))]),D(S,M)}),A(b),D(x,b)}),A(h);var f=X(h,2);U(f,5,()=>t(e),G,(x,O,k)=>{var b=Sr();U(b,5,()=>t(O),G,(S,q)=>{var M=kr(),N=R(M),B=R(N,!0);A(N),A(M),F($=>{J(N,1,$),ve(B,t(q))},[()=>(t(l),z(()=>t(l).horizontal.includes(k)?"":"opacity-20"))]),D(S,M)}),A(b),D(x,b)}),A(f);var o=X(f,2);U(o,5,()=>(t(e),z(()=>({length:t(e).length}))),G,(x,O,k)=>{var b=Tr();U(b,5,()=>(t(n),z(()=>({length:t(n).length}))),G,(S,q,M)=>{var N=yr(),B=R(N);A(N),F(($,re)=>{J(N,1,`${t(s),z(()=>t(s)[k][M]===1?"!bg-black":t(s)[k][M]===-1?"x":"bg-white inset-ring-1")??""} transition-all duration-200 hover:scale-115 hover:rounded-xs hover:-rotate-5 hover:ring-2 hover:z-1 hover:bg-gray-100 relative w-full h-full`,"svelte-1gci4l2"),J(B,1,`${$??""} ${re??""} opacity-50`,"svelte-1gci4l2")},[()=>(t(l),z(()=>t(l).horizontal.includes(k)?"":"line-x")),()=>(t(l),z(()=>t(l).vertical.includes(M)?"":"line-y"))]),K("contextmenu",N,pe(function($){xr.call(this,r,$)})),K("mousedown",N,pe($=>y($,k,M))),K("mouseover",N,()=>{t(p)&&E(k,M)}),D(S,N)}),A(b),D(x,b)}),A(o),A(_),A(v);var g=X(v,2),d=X(R(g),4);U(d,5,()=>(t(s),z(()=>({length:t(s).length}))),G,(x,O,k)=>{var b=Ir();b.textContent=k+1,F(S=>J(b,1,`px-2 py-1 ${S??""}`),[()=>(t(l),z(()=>t(l).horizontal.includes(k)?"":"text-white/20"))]),D(x,b)}),A(d);var m=X(d,2);U(m,5,()=>(t(s),z(()=>({length:t(s)[0].length}))),G,(x,O,k)=>{var b=Cr();b.textContent=k+1,F(S=>J(b,1,`px-2 py-1 ${S??""}`),[()=>(t(l),z(()=>t(l).vertical.includes(k)?"":"text-white/20"))]),D(x,b)}),A(m),A(g),K("mouseup",_,()=>L(p,!1)),K("mouseleave",_,()=>L(p,!1)),K("keypress",_,()=>null),D(i,c)};ye(I,i=>{t(s),z(()=>t(s).length>0)&&i(C)})}return D(a,T),br(r,"random",w),Se({random:w})}var Rr=(a,r,e)=>r(t(e)),Lr=H('<li class="p-2 hover:inset-ring-1 rounded-sm transition-all"> </li>'),Hr=(a,r)=>L(r,!t(r)),Or=H('<div class="grid grid-rows-[auto_1fr] bg-black rounded-sm overflow-hidden"><ol class="cursor-pointer order-1 rounded-xs"><!></ol> <input class="cursor-pointer outline-none m-2 min-w-0 order-2" role="combobox" readonly=""/></div>');function zr(a,r){Ne(r,!0);let e=Z(!1),n=Z(void 0),s=le(r,"options",19,()=>[]),l=le(r,"select",15),u=le(r,"placeholder",3,"Select");const p=C=>{l(C.value),L(n,C.name,!0),L(e,!1)};var y=Or(),E=R(y),w=R(E);{var T=C=>{var i=ke(),c=oe(i);U(c,17,s,G,(v,_)=>{var h=Lr();h.__click=[Rr,p,_];var f=R(h,!0);A(h),F(()=>ve(f,t(_).name)),D(v,h)}),D(C,i)};ye(w,C=>{t(e)&&C(T)})}A(E);var I=X(E,2);mr(I),I.__click=[Hr,e],A(y),F(()=>{pr(I,t(n)),de(I,"placeholder",u())}),D(a,y),Se()}Te(["click"]);var $r=H('<div><div class="w-fit mx-auto mt-4"><!></div> <div class="fixed grid gap-2 bottom-4 right-4 !w-30"><!> <!></div></div>');function Ur(a){let r=Z(void 0),e=Z(void 0),n=[{name:"5x5",value:5},{name:"8x8",value:8},{name:"10x10",value:10}];function s(){t(r).random(t(e))}var l=$r(),u=R(l),p=R(u);or(Dr(p,{}),T=>L(r,T,!0),()=>t(r)),A(u);var y=X(u,2),E=R(y);zr(E,{get options(){return n},placeholder:"Select size",get select(){return t(e)},set select(T){L(e,T,!0)}});var w=X(E,2);Er(w,{onclick:s,children:(T,I)=>{nr();var C=sr("New");D(T,C)}}),A(y),A(l),D(a,l)}export{Ur as component};
